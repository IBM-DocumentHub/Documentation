## JavaScript package

If you use DocumentHub in a JavaScript project then it's recommnded to use the documenthub package instead of directly calling the APIs.


### How to install it

#### Install

```
npm i documenthub
```

#### Upgrade to latest version

```
npm i documenthub@latest
```


### How to use it


#### React

```
import documenthub from 'documenthub'

function App() {
	
	documenthub.ensureIBMidLogin('demo')
	
	documenthub.get('catalogs').then((result) => {
		console.log(result)
	}).catch((error) => {
		console.error(error);
	});
...
```


#### Node

```
const documenthub = require('documenthub')

documenthub.basicAuth('demo', 'demo')

let catalogs = await documenthub.getCatalogs()

let document = await documenthub.getDocument('ARZdzxFe', 'html')
```


#### HTML

```
 <script src="https://unpkg.com/documenthub@latest/documenthub.js"></script> 
```


### Auth functions

- basicAuth(libraryId, librarySecret, userId?) - set basic authorization. UserId is optional.
- bearerAuth(token) - set bearer authorization
- getTokenCookie() - gets the "caasToken" cookie. If the token is missing null is returned. If the token is expired then the token is deleted and null is returned.
- setTokenCookie(token) - set the "caasToken" cookie
- useTokenCookie() - get the "caasToken" cookie and set it in the bearer authorization. Returns true if the cookie is found.
- deleteTokenCookie() - delete the "caasToken" cookie
- async getTokenByCode(code) - get the token by the given code
- async doLoginCallback() - get the token based on the code received in query params, set the "caasToken" cookie and the bearer authorization, and redirect to original url. Returns true if the code is found.


### w3id functions

- async ensureW3idLogin(libraryId, redirectUrl?) - if the user is not logged in, w3id SSO Login is called. After login, it redirects back to the current page or to redirectUrl if provided.
- getW3idSSOLoginUrl(libraryId, queryString)


### IBMid functions

- async ensureIBMidLogin(libraryId) - if user is not logged in, redirects to IBMid SSO login with the current url as redirect param
- getIBMidSSOLoginUrl(libraryId, queryString)


### Generic API functions

- async get(path)
- async post(path, body)
- async put(path, body)
- async patch(path, body)
- async delete(path)


### Libraries functions

- async getLibraries()
- async getLibrary(libraryId)


### Catalogs functions

- async getCatalogs()
- async getCatalog(catalogId)
- async updateCatalog(catalogId, jsonBody)
- async patchCatalog(catalogId, jsonBody)
- async patchSubcatalog(catalogId, subcatalogId, jsonBody)
- async createGitHubCatalog(repositoryUrl, branch, libraryId?)


### Documents functions

- async getDocuments(catalogId)
- async getDocumentsBrief(catalogId, fields)
- async getDocument(catalogId, documentId, language)
- async addDocument(catalogId, documentId, language, jsonBody)
- async updateDocument(catalogId, documentId, language, jsonBody)
- async patchDocument(catalogId, documentId, language, jsonBody)
- async deleteDocument(catalogId, documentId, language)
- async copyDocument(fromCatalogId, documentId, language, toCatalogId, toDocumentId)
- async addDocumentsBatch(catalogId, jsonBody)
- async deleteDocumentBatch(catalogId, jsonBody)
- async addDocumentSet(catalogId, jsonBody)
- async deleteDocumentSet(catalogId, jsonBody)


### Documents search and filter functions

- async searchDocuments(catalogId, text)
- async advancedSearch(catalogId, query)
- async getSearchSuggestions(catalogId, text, limit)
- async getFiltersCount(catalogId)


### Contents functions

- async getDocumentContents(catalogId, documentId, language)
- async getDocumentContentsByIndex(catalogId, documentId, language, index)
- async getDocumentFile(catalogId, documentId, language, filePath)
- async addDocumentFile(catalogId, documentId, language, filePath, content, contentType?)
- async updateDocumentFile(catalogId, documentId, language, filePath, content, contentType?)
- async deleteDocumentFile(catalogId, documentId, language, filePath)
- async patchDocumentFile(catalogId, documentId, language, filePath, jsonBody)


### Version 8

- useV8() - will use v8 endpoints. v7 and v8 use the same database, but the cache is different, so don't mix them for the same catalog.


### Logging

- debug() - set logging to debug level

