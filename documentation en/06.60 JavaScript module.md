### See the latest JS module documentation here: [https://www.npmjs.com/package/documenthub](https://www.npmjs.com/package/documenthub)


# DocumentHub

A javascript module for DocumentHub API

https://developer.ibm.com/edge/documenthub


## How to install it

### Install

```
npm i documenthub
```

### Upgrade to latest version

```
npm outdated
npm i documenthub@latest
```


## How to use it


### React

```
import documenthub from 'documenthub'

function App() {
	
	documenthub.ensureW3idLogin('demo')
	
	documenthub.get('catalogs').then((result) => {
		console.log(result)
	}).catch((error) => {
		console.error(error);
	});
...
```


### Node

```
const documenthub = require('documenthub')

documenthub.basicAuth('demo', 'demo')

let catalogs = await documenthub.getCatalogs()

let document = await documenthub.getDocument('ARZdzxFe', 'html')
```


### HTML

```
 <script src="https://unpkg.com/documenthub@0.0.2/documenthub.js"></script> 
```


## Auth functions

- basicAuth(id, secret)
- bearerAuth(token)
- getTokenCookie(token)
- setTokenCookie(token)
- deleteTokenCookie()


## w3id functions

- async ensureW3idLogin(libraryId) - if user is not logged in, redirects to w3id SSO login with the current url as redirect param
- async doW3idLoginCallback() - gets the token based on the code received in query params, sets the caasToken cookie and the bearer authorization, and redirects to original url
- getW3idSSOLoginUrl(libraryId, queryString)
- async getW3idToken(code)


## IBMid functions

- async ensureIBMidLogin(libraryId) - if user is not logged in, redirects to IBMid SSO login with the current url as redirect param
- async doIBMidLoginCallback() - gets the token based on the code received in query params, sets the caasToken cookie and the bearer authorization, and redirects to original url
- getIBMidSSOLoginUrl(libraryId, queryString)
- async getIBMidToken(code)


## Generic API functions

- async get(path)
- async post(path, body)
- async put(path, body)
- async patch(path, body)
- async delete(path)


## Catalogs functions

- async getCatalogs()
- async getCatalog(catalogId)
- async updateCatalog(catalogId, jsonBody)
- async patchCatalog(catalogId, jsonBody)
- async patchSubcatalog(catalogId, subcatalogId, jsonBody)


## Documents functions

- async getDocuments(catalogId)
- async getDocumentsBrief(catalogId, fields)
- async getDocument(catalogId, documentId, language)
- async addDocument(catalogId, documentId, language, jsonBody)
- async updateDocument(catalogId, documentId, language, jsonBody)
- async patchDocument(catalogId, documentId, language, jsonBody)
- async deleteDocument(catalogId, documentId, language)
- async copyDocument(fromCatalogId, documentId, language, toCatalogId, toDocumentId)


## Documents search and filter functions

- async searchDocuments(catalogId, text)
- async advancedSearch(catalogId, query)
- async searchSuggestions(catalogId, text, limit)
- async filterDocuments(catalogId, filter)
- async advancedFilter(catalogId, query)
- async filtersCount(catalogId)


## Contents functions

- async getDocumentContents(catalogId, documentId, language)
- async getDocumentContentsByIndex(catalogId, documentId, language, index)
- async getDocumentFile(catalogId, documentId, language, filePath)
- async addDocumentFile(catalogId, documentId, language, filePath, content, contentType)
- async updateDocumentFile(catalogId, documentId, language, filePath, content, contentType)
- async deleteDocumentFile(catalogId, documentId, language, filePath)
- async patchDocumentFile(catalogId, documentId, language, filePath, jsonBody)
