## First application with Angular + DocumentHub CMS + IBM SSO

### Create Angular application

Follow the steps from angular.io website: https://angular.io/guide/setup-local

```
npm install -g @angular/cli
ng new Angular-DocumentHub-App
cd Angular-DocumentHub-App
ng serve -o
```

### Load Page Component

In your Angular application go to the root ```index.html``` and add the DocumentHub Components styles
```
<link rel="stylesheet" href="https://unpkg.com/documenthub-web-components@latest/dist/lib/index.css">
```

Add the **CUSTOM_ELEMENTS_SCHEMA** setting in your ```app/app.module.ts``` to tell Angular to use custom HTML tags:

```
import { CUSTOM_ELEMENTS_SCHEMA, NgModule } from '@angular/core';  // import CUSTOM_ELEMENTS_SCHEMA here
import { BrowserModule } from '@angular/platform-browser';

import { AppRoutingModule } from './app-routing.module';
import { AppComponent } from './app.component';

@NgModule({
  declarations: [
    AppComponent
  ],
  imports: [
    BrowserModule,
    AppRoutingModule
  ],
  providers: [],
  bootstrap: [AppComponent],
  schemas: [CUSTOM_ELEMENTS_SCHEMA]  // add it here
})
export class AppModule { }
```

Add the custom tag to the Angular component in the file: ```app.component.html```
```
  <documenthub-page 
    catalogid="008"
    documentid="page"
    headings="false"
    token=""
  ></documenthub-page>
```

Add the script which handles the DocumentHub component logic in the file: ```app.component.ts```
```
export class AppComponent {
  title = 'Angular-DocumentHub-App';

  public loadExternalScript(url: string) {
    const script = document.createElement('script')
    script.innerHTML = ''
    script.src = url
    document.body.appendChild(script)
  }

  // init component after the Angular component is initialzed
  ngOnInit() {
    if (!document.querySelector('#documenthub-page')) {
      this.loadExternalScript("https://unpkg.com/documenthub-web-components@latest/dist/lib/index.js")
    }
  }
}
```

Save and run the application:

```
ng serve -o
```


### Install DocumentHub

To install the DocumentHub Javascript package, run the following command in your Angular application root folder (my-app):

```
npm i documenthub8
```

### Add IBMid SSO

To add IBMid SSO to our Angular application, a single line of code is required at the beginning of our code:

```
import documenthub8 from "documenthub8";

documenthub8.ensureIBMidLogin('demo')
```

After the SSO login the user token will be stored as a cookie and the browser will return to the initial URL

Let's show the current user token in our app. Replace (I.E ```app.component.ts```) with the following:

```
import { Component, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';
import { ensureIBMidLogin, ensureW3idLogin } from "documenthub8";

ensureIBMidLogin('demo') //IBMid

@Component({
  selector: 'app-root',
  templateUrl: './app.component.html',
  styleUrls: ['./app.component.scss']
})
export class AppComponent {
  title = 'angular-with-documenthub-web-components';

  public loadExternalScript(url: string) {
    const script = document.createElement('script')
    script.innerHTML = ''
    script.src = url
    document.body.appendChild(script)
  }

  ngOnInit() {
    if (!document.querySelector('#documenthub-page')) {
        this.loadExternalScript("https://unpkg.com/documenthub-web-components@latest/dist/lib/index.js")
      }
  }
}

```

### Conclusion

In this tutorial we created a Angular application with SSO and DocumentHub CMS, which can access content from any GitHub repository.

You can now manage your content in GitHub and load it in your application. You can also update content in GitHub from your application, the same as you do with a database.
