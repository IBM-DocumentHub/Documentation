## Create a Node + DocumentHub CMS + IBM SSO application


### Create Node application

Follow the steps from expressjs.com website: https://expressjs.com/en/starter/generator.html

```
mkdir nodeapp
cd nodeapp
npx express-generator
npm i
npm start
```

Open http://localhost:3000/ in a browser and you should be able to see the Express welcome message.


### Install DocumentHub

To install the DocumentHub Javascript package, run the following command in your Node application folder (nodeapp):

```
npm i documenthub
```


### Load document from GitHub

Let's load in our Node application a json file from GitHub: https://github.com/IBM-DocumentHub/Documentation/blob/master/documentation%20en/document.json

Add the following code right before the line: app.use('/', indexRouter);

```
const documenthub = require('documenthub')

app.get('/doc', async (req, res) => {
	var data = await documenthub.getDocument('IcCVI6RO', 'documentation', 'en')
  res.json(data.document)
})
```

Save and start the application:
```
npm start
```

Open http://localhost:3000/doc in a browser and you should be able to see the contents of the docuemnt.json file.



### Add IBMid SSO

To add IBMid SSO to our Node application, we have to define a callback endpoint our code:

```
documenthub.ensureIBMidLogin('demo')
```

Save and start the application:
```
npm start
```

To start the SSO process the UI have to redirect to the SSO page. For the demo libary this is: https://developer.ibm.com/edge/documenthub/sso/ibmid/login/demo

Let's open this SSO page in a browser. This will redirect to the SSO provider page. After we enter the credentials it will return to the callback endpoint: http://localhost:3000/sso/callback

